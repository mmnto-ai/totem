# Gemini Code Assist Configuration for Totem
# Docs: https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github

# Review Settings
comment_severity_threshold: HIGH # Only HIGH severity issues trigger comments (not MEDIUM/LOW)
max_review_comments: 5 # Limit comments per PR to avoid noise

# Pull Request Behavior
pull_request_opened:
  help: false # Don't post help message on every PR
  summary: true # Post PR summary
  code_review: true # Enable code review
  include_drafts: true # Review draft PRs too

# File Exclusions (glob patterns)
ignore_patterns:
  # LanceDB artifacts
  - '**/.lancedb/**'
  - '**/.totem/**'

  # Test fixtures
  - '**/__fixtures__/**'
  - '**/__mocks__/**'

  # Generated/build output
  - '**/dist/**'
  - '**/build/**'

  # Dependencies
  - '**/node_modules/**'
  - 'pnpm-lock.yaml'

custom_rules:
  - rule: allow_console_log_in_cli
    paths: ['packages/cli/**/*']
    rationale: 'CLI applications require console.log and console.error for user output.'

  - rule: mcp_stdio_transport
    paths: ['packages/mcp/**/*']
    rationale: 'MCP servers must use stdio transport and must not log arbitrary text to stdout, as it breaks the MCP protocol.'

have_fun: false